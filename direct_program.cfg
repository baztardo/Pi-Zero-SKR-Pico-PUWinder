# Direct programming via SWD without bootloader
# This should work even if the target Pico is not in bootloader mode

source [find interface/cmsis-dap.cfg]
source [find target/rp2040.cfg]

# Set adapter speed
adapter speed 5000

# Initialize
init

# Reset and halt the target
reset halt

# Erase the flash
flash erase_sector 0 0 last

# Program the firmware
program pico_firmware/build/pico_spindle_controller.uf2 verify reset exit
