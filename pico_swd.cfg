# OpenOCD configuration for Pico SWD upload via Pico Probe
# This configures OpenOCD to use the Pico probe for SWD communication

# Use CMSIS-DAP interface (Pico probe uses this)
source [find interface/cmsis-dap.cfg]

# Configure for RP2040 target
source [find target/rp2040.cfg]

# Set adapter speed for reliable communication
adapter speed 5000

# Configure the target
targets rp2040.core0

# Initialize the target
init

# Reset and halt the target
reset halt

# Load the firmware
program pico_firmware/build/pico_spindle_controller.uf2 verify reset exit
